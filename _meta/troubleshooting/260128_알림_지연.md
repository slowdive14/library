---
type: troubleshooting
status: done
description: "텔레그램 도서 알림이 3-4시간 지연되는 문제"
created: 2026-01-28
modified: 2026-01-28
phase: done
---

# 문제
> 텔레그램에서 책 검색 후 대출 가능 알림이 3-4시간 후에 도착

---

# 시도
- GitHub Actions cron 스케줄 확인
- bot.py와 monitor.py 아키텍처 분석
- GitHub Actions 무료 플랜 cron 지연 현상 조사

---

# 원인
- GitHub Actions cron이 **매시간 1회**만 실행됨 (`0 * * * *`)
- GitHub Actions 무료 플랜에서 **cron 실행 지연** (대기열 문제로 2-3시간 추가 지연 발생)
- bot.py는 사용자 명령어만 처리하고, 자동 모니터링 기능 없음

---

# 해결
- `.github/workflows/monitor.yml`: cron `0 * * * *` → `*/15 * * * *` (15분마다)
- `bot.py`: 백그라운드 모니터링 기능 추가 (30분마다 자동 체크 + 즉시 알림)

---

# 관련 파일
- C:\Users\user\Downloads\library_search\.github\workflows\monitor.yml
- C:\Users\user\Downloads\library_search\bot.py

---

# 재발 방지
- GitHub Actions cron은 지연될 수 있으므로 실시간성이 중요한 기능은 상시 실행 봇에 직접 구현
- bot.py를 Railway/Render/VPS 등 상시 실행 환경에서 운영 권장

---

# 📝 쉬운 설명

### 문제
책이 대출 가능해졌을 때 알림이 3-4시간 늦게 와서 이미 다른 사람이 빌려간 경우가 발생

### 원인
알림을 보내는 프로그램이 1시간에 1번만 돌아가고, GitHub 서버가 바쁘면 그것도 몇 시간씩 밀림. 마치 버스가 1시간에 1대만 오는데, 그 버스마저 자주 연착하는 것과 같음.

### 해결
1. GitHub에서 15분마다 체크하도록 변경 (버스 배차 간격 줄임)
2. 텔레그램 봇 자체에 30분마다 자동으로 체크하는 기능 추가 (직접 걸어가는 옵션 추가)

### 관련 파일
- C:\Users\user\Downloads\library_search\.github\workflows\monitor.yml
- C:\Users\user\Downloads\library_search\bot.py
